<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{template :: head}"></head>
    <body>
        <header th:replace="~{template :: header}"></header>

        <div class="container" data-bs-spy="scroll">
            <form th:action="@{/views/proyectos/guardar}" th:object="${proyectoDTO}" method="post">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h4 class="card-title">
                            <i class="bi-clipboard-plus"></i>
                            <span th:text="${titulo}"></span>
                        </h4>
                    </div>
                    <div class="card-body">
                        <input type="hidden" th:field="*{proyecto.idProyecto}">
                        <div class="row">
                            <div class="col">
                                <label for="nombre" class="form-label">Nombre del proyecto</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="bi-input-cursor-text"></i>
                                    </span>
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="nombre" placeholder="Nombre..." th:field="*{proyecto.nombre}" aria-describedby="nombre" aria-label="nombre" >
                                        <label for="nombre">Nombre:</label>
                                    </div>
                                </div>
                                <span class="form-text">Nombre asignado al proyecto.</span>
                                <div class="alert alert-warning" th:if="${#fields.hasErrors('proyecto.nombre')}" th:errors="*{proyecto.nombre}"></div>
                            </div>
                            <div class="col">
                                <label for="descripcion" class="form-label">Descripci贸n del proyecto</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="bi-input-cursor-text"></i>
                                    </span>
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="descripcion" placeholder="Descripci贸n..." th:field="*{proyecto.descripcion}" aria-describedby="descripcion" aria-label="descripcion">
                                        <label for="descripcion">Descripci贸n:</label>
                                    </div>
                                </div>
                                <span class="form-text">Descripci贸n asignada al proyecto.</span>
                                <div class="alert alert-warning" th:if="${#fields.hasErrors('proyecto.descripcion')}" th:errors="*{proyecto.descripcion}"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <label for="estadoProyecto" class="form-label">Estado del proyecto</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="bi-cursor"></i>
                                    </span>
                                    <div class="form-floating">
                                        <select class="form-select selectpicker" id="estadoProyecto" th:field="*{proyecto.estadoProyecto.idEstadoProyecto}" aria-describedby="estadoProyecto" aria-label="estadoProyecto">
                                            <option selected disabled value="">Seleccionar estado...</option>
                                            <option th:each="lep : ${listaEstadosProyecto}" th:value="${lep.idEstadoProyecto}" th:text="${lep.descripcion}"></option>
                                        </select>
                                        <label for="estadoProyecto">Estado:</label>
                                    </div>
                                </div>
                                <span class="form-text">Estado asignado al proyecto.</span>
                                <div class="alert alert-warning" th:if="${#fields.hasErrors('proyecto.estadoProyecto.idEstadoProyecto')}" th:errors="*{proyecto.estadoProyecto.idEstadoProyecto}"></div>
                            </div>
                            <div class="col">
                                <label for="usuarioAsignado" class="form-label">Usuario responsable del proyecto</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="bi-cursor"></i>
                                    </span>
                                    <div class="form-floating">
                                        <select class="form-select selectpicker" id="usuarioAsignado" th:field="*{proyecto.usuarioAsignado}" aria-describedby="usuarioAsignado" aria-label="usuarioAsignado">
                                            <option selected disabled value="">Seleccionar usuario...</option>
                                            <option th:each="lu : ${listaUsuarios}" th:value="${lu.nombreUsuario}" th:text="${lu.nombreUsuario}"></option>
                                        </select>
                                        <label for="usuarioAsignado">Usuario:</label>
                                    </div>
                                </div>
                                <span class="form-text">Usuario responsable asignado al proyecto.</span>
                                <div class="alert alert-warning" th:if="${#fields.hasErrors('proyecto.usuarioAsignado')}" th:errors="*{proyecto.usuarioAsignado}"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <label for="fechaInicio" class="form-label">Fecha de inicio del proyecto</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="bi-calendar"></i>
                                    </span>
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="fechaInicio" placeholder="Fecha..." th:field="*{proyecto.fechaInicio}" aria-describedby="fechaInicio" aria-label="fechaInicio">
                                        <label for="fechaInicio">Fecha:</label>
                                    </div>
                                </div>
                                <span class="form-text">Fecha de inicio asignada al proyecto.</span>
                                <div class="alert alert-warning" th:if="${#fields.hasErrors('proyecto.fechaInicio')}" th:errors="*{proyecto.fechaInicio}"></div>
                            </div>
                            <div class="col">
                                <label for="fechaFin" class="form-label">Fecha de fin del proyecto</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="bi-calendar"></i>
                                    </span>
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="fechaFin" placeholder="Fecha..." th:field="*{proyecto.fechaFin}" aria-describedby="fechaFin" aria-label="fechaFin">
                                        <label for="fechaFin">Fecha:</label>
                                    </div>
                                </div>
                                <span class="form-text">Fecha de fin asignada al proyecto.</span>
                                <div class="alert alert-warning" th:if="${#fields.hasErrors('proyecto.fechaFin')}" th:errors="*{proyecto.fechaFin}"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <label for="listaUsuariosAsignar" class="form-label">Asignar usuarios al proyecto:</label>
                                <div class="input-group">
                                    <!-- <span class="input-group-text">
                                        <i class="bi-cursor"></i>
                                    </span> -->
                                    <div class="form-floating">
                                        <select class="form-control" id="listaUsuariosAsignar" name="listaUsuariosProyecto[]" th:field="*{listaUsuariosProyecto}" multiple="multiple" aria-describedby="listaUsuariosAsignar" aria-label="listaUsuariosAsignar">
                                            <option selected disabled value="">Seleccionar usuario(s)...</option>
                                            <option th:each="lu : ${listaUsuarios}" th:value="${lu.idUsuario}" th:text="${lu.nombreUsuario}"></option>
                                        </select>
                                        <!-- <label for="listaUsuariosAsignar">Usuario(s)</label> -->
                                    </div>
                                </div>
                                <span class="form-text">Usuario(s) asignado(s) al proyecto.</span>
                                <div class="alert alert-warning" th:if="${#fields.hasErrors('listaUsuariosProyecto')}" th:errors="*{listaUsuariosProyecto}"></div>
                            </div>
                            <div class="col">
                                
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-dark text-white">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi-save"></i>
                            <span>Guardar</span>
                        </button>
                    </div>
                </div>
            </form>
        </div>

    </body>
    <footer th:replace="~{template :: footer}">
        <script>
            // let fechaInicio = document.getElementById('fechaInicio')
            // let fechaFin = document.getElementById('fechaFin')

            /* fechaInicio.addEventListener('change', (e) => {
                let fechaInicioVal = e.target.value
                console.log(fechaInicioVal)
            }) */

            /* fechaFin.addEventListener('change', (e) => {
                let fechaFinVal = e.target.value
                console.log(fechaFinVal)
            }) */
        </script>
    </footer>
</html>
