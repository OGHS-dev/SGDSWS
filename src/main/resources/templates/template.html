<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head th:fragment="head">
        <title>SGDSWS</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- Bootstrap CSS -->
        <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.3/css/bootstrap.min.css}" type="text/css"/>
        <!-- Bootstrap icons -->
        <link th:rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"/>

        <!-- <link th:rel="stylesheet" th:href="@{/webjars/npm/bootstrap4-duallistbox/4.0.2/dist/bootstrap-duallistbox.min.css}" type="text/css"/> -->
        <link th:rel="stylesheet" th:href="@{/css/bootstrap-duallistbox.min.css}"/>
    </head>

    <!-- <body th:fragment="body"> -->
        
        <!-- Encabezado -->
        <header th:fragment="header">

            <!-- Barra de navegación/menus -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top sticky-top">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">
                        <!-- <img src="..." class="rounded me-2" alt="..."> -->
                        <span>SGDSWS</span>
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent" sec:authorize="isAuthenticated()">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0 d-flex">
                            <li class="nav-item dropdown">
                                <a class="btn btn-outline-info dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="bi-person-circle"></i>
                                    <span sec:authentication="name"></span>
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <li>
                                        <a class="dropdown-item" href="#">Configuración</a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="#">Cambiar Contraseña</a>
                                    </li>
                                    <li>
                                        <hr class="dropdown-divider">
                                    </li>
                                    <li>
                                        <form th:action="@{/logout}" method="post">
                                            <button class="dropdown-item" type="submit">Cerrar Sesión</button>
                                        </form>
                                    </li>
                                </ul>
                            </li>
                            <div class="vr"></div>
                            <a class="btn btn-outline-light" data-bs-toggle="offcanvas" href="#offcanvasScrolling" aria-controls="offcanvasScrolling">
                                <i class="bi-menu-button"></i>
                                <span>Menú</span>
                            </a>
                            <div class="vr"></div>
                            <!-- <li sec:authorize="!isAuthenticated()">
                                <a class="btn btn-outline-warning" th:href="@{/login}">Iniciar Sesión</a>
                            </li> -->
                        </ul>
                        <form class="d-flex">
                            <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Buscar">
                            <button class="btn btn-outline-success" type="submit">
                                <!-- <i class="bi-search"></i>&nbsp; -->
                                <span>Buscar</span>
                            </button>
                        </form>
                    </div>
                </div>
            </nav>

            <!-- Menu lateral -->
            <div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
                <div class="offcanvas-header bg-dark text-white">
                    <h3 class="offcanvas-title" id="offcanvasScrollingLabel">Módulos</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="list-group" role="tablist">
                        <a class="list-group-item list-group-item-action" th:href="@{/index}" role="tab">
                            <i class="bi-house"></i>
                            <span>&nbsp;Inicio</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/usuarios/}" role="tab">
                            <i class="bi-person-circle"></i>
                            <span>&nbsp;Usuarios</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/roles/}" role="tab">
                            <i class="bi-person-badge"></i>
                            <span>&nbsp;Roles</span>
                        </a>
                        <a class="list-group-item list-group-item-action disabled" tabindex="-1" aria-disabled="true">
                            <i class="bi-people"></i>
                            <span>&nbsp;Equipos</span>
                        </a>
                        <a class="list-group-item list-group-item-action" th:href="@{/views/proyectos/}" role="tab">
                            <i class="bi-clipboard-data"></i>
                            <span>&nbsp;Proyectos</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/prioridades/}" role="tab">
                            <i class="bi-list-ol"></i>
                            <span>&nbsp;Prioridades</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/impactos/}" role="tab">
                            <i class="bi-fire"></i>
                            <span>&nbsp;Impactos</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/nivelesRiesgo/}" role="tab">
                            <i class="bi-exclamation-triangle"></i>
                            <span>&nbsp;Niveles de Riesgo</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/estadosProyecto/}" role="tab">
                            <i class="bi-bookmark"></i>
                            <span>&nbsp;Estados Proyecto</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/estadosBitacoraProyecto/}" role="tab">
                            <i class="bi-bookmark"></i>
                            <span>&nbsp;Estados Bitácora Proyecto</span>
                        </a>
                        <a class="list-group-item list-group-item-action" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/views/eventos/}" role="tab">
                            <i class="bi-info-square"></i>
                            <span>&nbsp;Eventos</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Mensajes -->
            <div class="alert alert-primary alert-dismissable fade show" role="alert" th:if="${info != null}">
                <i class="bi-info-circle-fill"></i>
                <label th:text="${info}"></label>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div class="alert alert-success alert-dismissable fade show" role="alert" th:if="${success != null}">
                <i class="bi-check-circle-fill"></i>
                <label th:text="${success}"></label>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div class="alert alert-warning alert-dismissable fade show" role="alert" th:if="${warning != null}">
                <i class="bi-exclamation-circle-fill"></i>
                <label th:text="${warning}"></label>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div class="alert alert-danger alert-dismissable fade show" role="alert" th:if="${error != null}">
                <i class="bi-exclamation-triangle-fill"></i>
                <label th:text="${error}"></label>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

        </header>

    <!-- </body> -->
    
    <!-- Pie de página -->
    <footer th:fragment="footer" class="footer-dark bg-dark text-white">
        <div class="container">
            <p>
                Copyright
                <br>
                Instituto Politécnico Nacional
                <br>
                Escuela Superior de Ingeniería Mecánica y Eléctrica Unidad Culhuacán
                <br>
                Sección de Estudios de Posgrado e Investigación
                <br>
                Maestría en Ingeniería en Seguridad y Tecnologías de la Información
                <br>
                MSI Pablo Ramón Mercado Hernández & Oscar Gabriel Hernández Santiesteban &copy; 2023
                <br>
            </p>
        </div>

        <!-- <script th:src="@{/webjars/bootstrap/5.2.3/js/bootstrap.min.js}"></script> -->
        <!-- <script th:src="@{/webjars/bootstrap/5.2.3/js/bootstrap.esm.min.js}"></script> -->
        <script th:src="@{/webjars/bootstrap/5.2.3/js/bootstrap.bundle.min.js}"></script>
        <script th:src="@{/webjars/jquery/3.6.4/jquery.min.js}"></script>
        <!-- <script th:src="@{/webjars/popper.js/2.9.3/umd/popper.min.js}"></script> -->

        <!-- <script th:src="@{/assets/bootstrap-dual-listbox/jquery.bootstrap-duallistbox.min.js}"></script> -->
        <!-- <script th:src="@{/webjars/npm/bootstrap4-duallistbox/4.0.2/dist/jquery.bootstrap-duallistbox.min.js}"></script> -->
        <script th:src="@{/js/jquery.bootstrap-duallistbox.min.js}"></script>

        <script>
            // Example starter JavaScript for disabling form submissions if there are invalid fields
            // (() => {
            //     'use strict'

            //     // Fetch all the forms we want to apply custom Bootstrap validation styles to
            //     const forms = document.querySelectorAll('.needs-validation')

            //     // Loop over them and prevent submission
            //     Array.from(forms).forEach(form => {
            //         form.addEventListener('submit', event => {
            //             if (!form.checkValidity()) {
            //                 event.preventDefault()
            //                 event.stopPropagation()
            //             }

            //             form.classList.add('was-validated')
            //         }, false)
            //     })
            // })()

            function goBack() {
                window.history.back();
            }

            // Inicializar plugin bootstrapDualListbox
            $('#listaUsuariosAsignar').bootstrapDualListbox({
                filterTextClear: 'Mostrar todos',
                filterPlaceHolder: 'Filtrar',
                moveSelectedLabel: 'Mover seleccionados',
                moveAllLabel: 'Mover todos',
                removeSelectedLabel: 'Quitar seleccionados',
                removeAllLabel: 'Quitar todos',
                moveOnSelect: true,
                selectedListLabel: false,
                infoText: 'Mostrando {0} usuarios',
                infoTextEmpty: 'Vacio',
                selectorMinimalHeight: 256
            });
        </script>
    </footer>
</html>
